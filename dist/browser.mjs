var g={imgType:"png",pages:"all",scale:1,background:"rgb(255,255,255)",intent:"display",documentOptions:{},maxWidth:null,maxHeight:null,scaleForBrowserSupport:!1},f=(t,n)=>{let r=n!==void 0?t:1,e=n!==void 0?n:t;return Array.from({length:e-r+1},(i,a)=>r+a)};function y(t,n){return t==="firstPage"?[1]:t==="lastPage"?[n]:typeof t=="number"?[Math.max(1,t)]:Array.isArray(t)?t.length?t:[1]:typeof t=="object"?f(t.startPage??1,t.endPage??n):f(1,n)}function u(t){return t instanceof Int8Array||t instanceof Uint8Array||t instanceof Uint8ClampedArray||t instanceof Int16Array||t instanceof Uint16Array||t instanceof Int32Array||t instanceof Uint32Array||t instanceof Float32Array||t instanceof Float64Array}function D(t,n){let r=async e=>await w(e,n);return Array.isArray(t)?Promise.all(t.map(r)):r(t)}async function w(t,n={}){let r=await import("pdfjs-dist/legacy/build/pdf.mjs");r.GlobalWorkerOptions.workerSrc="//cdnjs.cloudflare.com/ajax/libs/pdf.js/4.8.69/pdf.worker.min.mjs";let e={...g,...n},a=await r.getDocument({...u(t)?{data:t}:{url:t},...e.documentOptions}).promise,o=a.numPages,s=y(e.pages,o),c=await Promise.all(s.map(m=>O(a,m,e)));return e.pages==="firstPage"||e.pages==="lastPage"||typeof e.pages=="number"?c[0]:c}async function O(t,n,r){let e=await t.getPage(n),i=r.scale,a=e.getViewport({scale:i});if(r.scaleForBrowserSupport||r.maxWidth||r.maxHeight){let{maxWidth:d,maxHeight:p}=r;d=d??4096,p=p??4096;let l=d/a.width,A=p/a.height,P=Math.min(l,A,1);i=i*P,a=e.getViewport({scale:i})}let o=document.createElement("canvas"),s=o.getContext("2d");o.height=a.height,o.width=a.width,await e.render({canvas:o,canvasContext:s,viewport:a,intent:r.intent||"display",background:r.background||"rgb(255,255,255)"}).promise;let m=r.imgType==="jpg"?"image/jpeg":"image/png";return o.toDataURL(m)}export{D as pdfToImg,w as singlePdfToImg};
